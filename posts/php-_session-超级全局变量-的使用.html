<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1" /><title>PHP $\_SESSION 超级全局变量 的使用</title><meta name="twitter:card" content="summary" /><meta name="twitter:site" content="@" /><meta name="twitter:title" content="PHP $\_SESSION 超级全局变量 的使用" /><meta name="twitter:description" content="The content is recoverd from Wordpress Blog, for more details please check HERE"><meta name="description" content="The content is recoverd from Wordpress Blog, for more details please check HERE"><meta name="google-site-verification" content="epFgX0s_0RM3CdjwFcsewfXzPov2g8s9ZBOLyaIUH-o"><link rel="icon" href="/assets/favicon.png"><link rel="apple-touch-icon" href="/assets/touch-icon.png"><link rel="stylesheet" href="//code.cdn.mozilla.net/fonts/fira.css"><link rel="stylesheet" href="/assets/core.css"><link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet"><link href="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.5.0/styles/github.min.css" rel="stylesheet"><link rel="canonical" href="/posts/php-_session-%E8%B6%85%E7%BA%A7%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F-%E7%9A%84%E4%BD%BF%E7%94%A8"><link rel="alternate" type="application/atom+xml" title="VOID001's WOWO" href="/feed.xml" /> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga( 'create', 'UA-73703130-2', 'auto' ); ga( 'send', 'pageview' ); </script></head><body><aside class="logo"> <a href="/"> <img src="/assets/avatar.jpeg" class="gravatar"> </a> <span class="logo-prompt">Back to Home</span></aside><div class="footer-flex" style="margin-bottom: 4px"> Thinking, Coding, Improving</div><div class="footer-flex" style="color: #333333"> <a href="http://github.com/VOID001"><i class="fa-brands fa-lg fa-github"></i></a> <span style="margin: 4px"></span> <a href="https://t.me/s/void001_fav"><i class="fa-brands fa-lg fa-telegram"></i></a> <span style="margin: 4px"></span> <a href="/feed"><i class="fa-solid fa-lg fa-rss"></i></a></div><script src="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.1.1/js/fontawesome.min.js"></script><main> <noscript><style> article .footnotes { display: block; }</style></noscript><article><div class="center"><h1>PHP $\_SESSION 超级全局变量 的使用</h1><time>October 1, 2014</time> <span>[ ]</span></div><div class="divider"></div><p>The content is recoverd from Wordpress Blog, for more details please check <a href="recover-my-blog">HERE</a></p><h5 id="october-1-2014"><a href="https://web.archive.org/web/20210418233646/https://void-shana.moe/webdev/php-_session-%e8%b6%85%e7%ba%a7%e5%85%a8%e5%b1%80%e5%8f%98%e9%87%8f-%e7%9a%84%e4%bd%bf%e7%94%a8.html" title="2:14 pm">October 1, 2014</a></h5><p><a href="https://web.archive.org/web/20210418233646/https://void-shana.moe/author/void001" title="View all posts by VOID001">VOID001</a> Comments <a href="https://web.archive.org/web/20210418233646/https://void-shana.moe/webdev/php-_session-%e8%b6%85%e7%ba%a7%e5%85%a8%e5%b1%80%e5%8f%98%e9%87%8f-%e7%9a%84%e4%bd%bf%e7%94%a8.html#respond">0 Comment</a></p><p>SESSION 变量，是给每个不同的用户分配一个不同的UID然后把相应的变量的值存储在服务器端，画个图就是这样的：</p><p><a href="https://web.archive.org/web/20210418233646/http://120.27.97.96/wp-content/uploads/2014/10/whatisPHPSessionVar.png"><img src="https://web.archive.org/web/20210418233646im_/http://120.27.97.96/wp-content/uploads/2014/10/whatisPHPSessionVar.png" alt="" title="whatisPHPSessionVar" /></a></p><p>如这个图片所示，有两个用户接入了某个服务器 一个是User1 UID=001 一个是User2 UID=002 那么，他们同时向服务器发出请求的时候，服务器端要对身份进行认证，只有username=admin的用户才有权限访问，这时候，在服务器端就要用到下面的代码 ：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php
session\_start();
check\_login(); ?&gt;
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd";&gt;

&lt;html&gt;

 &lt;head&gt;

  &lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;

&lt;?php
      //OTHER CODES ..........

	function check\_login()
	{
		if(!isset($\_SESSION['username']))
		{
			header("Location:index.php");
			exit();
		}
		return ;
	}
?&gt;

	&lt;/head&gt;

 &lt;/html&gt;
</code></pre></div></div><p>这段代码的作用是：当用户访问了该页面的时候，先检测用户的username是否为admin 如果是的话，执行其它代码 否则返回登录页面 。具体的识别机制就是上面的那样，<strong>首先，要使用 session_start()函数，而且，这个函数要用在所有输出操作未进行之前，不然就没法建立会话了</strong>，建立会话之后，服务器端在login页面会给用户分配一个UID如上图，当然，分配的是加密的ID 然后并且在服务器端给这个UID建立相应的PHPSESSION 数组，具体实现是给用户发送了一个SESSION Cookie 在关闭浏览器的时候，就会把Cookie销毁，然后，在用户向服务器发送访问页面请求的时候，服务器端会根据这个用户的UID找到这个用户的SESSION 变量，并且该用户的SESSION变量不会被别人访问到。然后 当用户存在 $_SESSION[‘username’]这个变量时，就登录成功，否则失败。</p><hr /><p><a href="https://web.archive.org/web/20210418233646/https://void-shana.moe/category/webdev/php">PHP</a>, <a href="https://web.archive.org/web/20210418233646/https://void-shana.moe/category/webdev">Web Develop</a> <a href="https://web.archive.org/web/20210418233646/https://void-shana.moe/tag/c-linux">C. Linux</a>, <a href="https://web.archive.org/web/20210418233646/https://void-shana.moe/tag/kernel">kernel</a>, <a href="https://web.archive.org/web/20210418233646/https://void-shana.moe/tag/laravel">Laravel</a>, <a href="https://web.archive.org/web/20210418233646/https://void-shana.moe/tag/php">PHP</a>, <a href="https://web.archive.org/web/20210418233646/https://void-shana.moe/tag/python">Python</a>, <a href="https://web.archive.org/web/20210418233646/https://void-shana.moe/tag/shell">Shell</a>, <a href="https://web.archive.org/web/20210418233646/https://void-shana.moe/tag/web">Web</a>, <a href="https://web.archive.org/web/20210418233646/https://void-shana.moe/tag/wine">wine</a></p><hr /><h2 id="historical-comments">Historical Comments</h2><p>Post navigation ————— <a href="https://web.archive.org/web/20210418233646/https://void-shana.moe/uncategorized/linux-xampp-%e5%ae%89%e8%a3%85.html">NEXT<br /> Linux XAMPP 安装</a> <a href="https://web.archive.org/web/20210418233646/https://void-shana.moe/ai/%e5%a4%8d%e6%9d%82-%e8%af%bb%e4%b9%a6%e7%ac%94%e8%ae%b0-%e7%be%8e-%e6%a2%85%e6%8b%89%e5%b0%bc-%e7%b1%b3%e6%ad%87%e5%b0%94.html">PREVIOUS “复杂” 读书笔记 (美 梅拉尼 米歇尔)</a></p><script src="https://giscus.app/client.js" data-repo="VOID001/VOID001.github.io" data-repo-id="MDEwOlJlcG9zaXRvcnkzMzI0MDI4NQ==" data-category="Announcements" data-category-id="DIC_kwDOAfs03c4COSSU" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="1" data-input-position="top" data-theme="light" data-lang="en" data-loading="lazy" crossorigin="anonymous" async> </script></article><div class="back"> <a href="/">Back</a></div><script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.5.0/highlight.min.js"></script> <script>hljs.highlightAll();</script></main></body></html>