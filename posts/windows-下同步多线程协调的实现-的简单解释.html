<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Windows 下同步(多线程协调)的实现 的简单解释</title><meta name="twitter:card" content="summary" /><meta name="twitter:site" content="@" /><meta name="twitter:title" content="Windows 下同步(多线程协调)的实现 的简单解释" /><meta name="twitter:description" content="The content is recoverd from Wordpress Blog, for more details please check HERE"><meta name="description" content="The content is recoverd from Wordpress Blog, for more details please check HERE"><meta name="google-site-verification" content="epFgX0s_0RM3CdjwFcsewfXzPov2g8s9ZBOLyaIUH-o"><link rel="icon" href="/assets/favicon.png"><link rel="apple-touch-icon" href="/assets/touch-icon.png"><link rel="stylesheet" href="//code.cdn.mozilla.net/fonts/fira.css"><link rel="stylesheet" href="/assets/core.css"><link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet"><link href="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.5.0/styles/github.min.css" rel="stylesheet"><link rel="canonical" href="/posts/windows-%E4%B8%8B%E5%90%8C%E6%AD%A5%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%8D%8F%E8%B0%83%E7%9A%84%E5%AE%9E%E7%8E%B0-%E7%9A%84%E7%AE%80%E5%8D%95%E8%A7%A3%E9%87%8A"><link rel="alternate" type="application/atom+xml" title="VOID001's WOWO" href="/feed.xml" /> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga( 'create', 'UA-73703130-2', 'auto' ); ga( 'send', 'pageview' ); </script></head><body><aside class="logo"> <a href="/"> <img src="/assets/avatar.jpeg" class="gravatar"> </a> <span class="logo-prompt">Back to Home</span></aside><div class="footer-flex" style="margin-bottom: 4px"> Thinking, Coding, Improving</div><div class="footer-flex" style="color: #333333"> <a href="http://github.com/VOID001"><i class="fa-brands fa-lg fa-github"></i></a> <span style="margin: 4px"></span> <a href="https://t.me/s/void001_fav"><i class="fa-brands fa-lg fa-telegram"></i></a> <span style="margin: 4px"></span> <a href="/feed"><i class="fa-solid fa-lg fa-rss"></i></a></div><script src="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.1.1/js/fontawesome.min.js"></script><main> <noscript><style> article .footnotes { display: block; }</style></noscript><article><div class="center"><h1>Windows 下同步(多线程协调)的实现 的简单解释</h1><time>September 5, 2015</time> <span>[ ]</span></div><div class="divider"></div><p>The content is recoverd from Wordpress Blog, for more details please check <a href="recover-my-blog">HERE</a></p><h5 id="september-5-2015"><a href="https://web.archive.org/web/20201020201524/https://void-shana.moe/linux/windows-%e4%b8%8b%e5%90%8c%e6%ad%a5%e5%a4%9a%e7%ba%bf%e7%a8%8b%e5%8d%8f%e8%b0%83%e7%9a%84%e5%ae%9e%e7%8e%b0-%e7%9a%84%e7%ae%80%e5%8d%95%e8%a7%a3%e9%87%8a.html" title="12:00 pm">September 5, 2015</a></h5><p><a href="https://web.archive.org/web/20201020201524/https://void-shana.moe/author/void001" title="View all posts by VOID001">VOID001</a> Comments <a href="https://web.archive.org/web/20201020201524/https://void-shana.moe/linux/windows-%e4%b8%8b%e5%90%8c%e6%ad%a5%e5%a4%9a%e7%ba%bf%e7%a8%8b%e5%8d%8f%e8%b0%83%e7%9a%84%e5%ae%9e%e7%8e%b0-%e7%9a%84%e7%ae%80%e5%8d%95%e8%a7%a3%e9%87%8a.html#respond">0 Comment</a></p><p>Windows下的多个线程之间的通信,是通过各种Object进行的, 目前我只了解到EventObject, 下面简单介绍一下什么是EventObject .</p><p>我们可以把各个线程想象成一些不同的流水线,比如制作面包的流水线, 一个线程(流水线)负责制作面包,另一个流水线负责将面包包装好,那么这两个流水线就存在逻辑上的顺序, 即使他们同时工作,包装的如果不等制作面包的制作好,是无法进行的. 在系统里也是这样 两个(或者多个)线程之间有依赖关系, 比如B要在A完成后才可以处理,C要等D E完成之后才能处理. 那么,多个线程之间如何协调好这个关系呢. 这时候Windows就使用EventObject来给各个线程发送信号,EventObject可以有名字也可以没有名字, 带名字的在多线程同步时很常用(这里说明一下 ,多个线程之间协调工作就叫同步), 在多线程同步处理事件的时候 , 首先建立好一系列的EventObject(和其他Object) ,然后 线程A执行开始的时候 将EventObjectA设置为FALSE(没被触发状态) 这时 线程B在等待EventObjectA的信号(就是保持挂起状态,一旦有信号激活就会开始执行) , 然后线程A执行完毕之后 , 就会将EventObjectA设置为TRUE (触发状态) 这时, 由于EventObjectA被触发, 线程B也就同时启动了,然后开始执行线程B,这样就实现了线程之间的同步</p><p>有关NtCreateEvent和 EventObject的说明 参见msdn文档</p><p><a href="https://web.archive.org/web/20201020201524/https://msdn.microsoft.com/en-us/library/windows/hardware/ff566423(v=vs.85).aspx">https://msdn.microsoft.com/en-us/library/windows/hardware/ff566423(v=vs.85).aspx</a> NtCreateEvent 的介绍</p><p><a href="https://web.archive.org/web/20201020201524/https://msdn.microsoft.com/en-us/library/windows/desktop/ms682655(v=vs.85).aspx">https://msdn.microsoft.com/en-us/library/windows/desktop/ms682655(v=vs.85).aspx</a> EventObject的介绍</p><hr /><p><a href="https://web.archive.org/web/20201020201524/https://void-shana.moe/category/linux">Linux</a>, <a href="https://web.archive.org/web/20201020201524/https://void-shana.moe/category/threads-and-process">Threads and Process</a>, <a href="https://web.archive.org/web/20201020201524/https://void-shana.moe/category/wine">wine</a>, <a href="https://web.archive.org/web/20201020201524/https://void-shana.moe/category/%e8%ae%a1%e7%ae%97%e6%9c%ba%e7%b3%bb%e7%bb%9f%e5%8e%9f%e7%90%86">计算机系统原理</a> <a href="https://web.archive.org/web/20201020201524/https://void-shana.moe/tag/c-linux">C. Linux</a>, <a href="https://web.archive.org/web/20201020201524/https://void-shana.moe/tag/kernel">kernel</a>, <a href="https://web.archive.org/web/20201020201524/https://void-shana.moe/tag/laravel">Laravel</a>, <a href="https://web.archive.org/web/20201020201524/https://void-shana.moe/tag/php">PHP</a>, <a href="https://web.archive.org/web/20201020201524/https://void-shana.moe/tag/python">Python</a>, <a href="https://web.archive.org/web/20201020201524/https://void-shana.moe/tag/shell">Shell</a>, <a href="https://web.archive.org/web/20201020201524/https://void-shana.moe/tag/web">Web</a>, <a href="https://web.archive.org/web/20201020201524/https://void-shana.moe/tag/wine">wine</a></p><hr /><h2 id="historical-comments">Historical Comments</h2><p>Post navigation ————— <a href="https://web.archive.org/web/20201020201524/https://void-shana.moe/wine/status_object_type_mismatch%e7%9a%84%e5%8f%af%e8%83%bd%e5%8e%9f%e5%9b%a0.html">NEXT<br /> STATUS_OBJECT_TYPE_MISMATCH的可能原因</a> <a href="https://web.archive.org/web/20201020201524/https://void-shana.moe/linux/mingw-%e5%92%8c-msys-%e7%9a%84%e5%8c%ba%e5%88%ab.html">PREVIOUS mingw 和 MSYS 的区别</a></p><script src="https://giscus.app/client.js" data-repo="VOID001/VOID001.github.io" data-repo-id="MDEwOlJlcG9zaXRvcnkzMzI0MDI4NQ==" data-category="Announcements" data-category-id="DIC_kwDOAfs03c4COSSU" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="1" data-input-position="top" data-theme="light" data-lang="en" data-loading="lazy" crossorigin="anonymous" async> </script></article><div class="back"> <a href="/">Back</a></div><script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.5.0/highlight.min.js"></script> <script>hljs.highlightAll();</script></main></body></html>