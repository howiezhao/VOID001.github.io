<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1" /><title>WordPress 源码学习</title><meta name="twitter:card" content="summary" /><meta name="twitter:site" content="@" /><meta name="twitter:title" content="WordPress 源码学习" /><meta name="twitter:description" content="The content is recoverd from Wordpress Blog, for more details please check HERE"><meta name="description" content="The content is recoverd from Wordpress Blog, for more details please check HERE"><meta name="google-site-verification" content="epFgX0s_0RM3CdjwFcsewfXzPov2g8s9ZBOLyaIUH-o"><link rel="icon" href="/assets/favicon.png"><link rel="apple-touch-icon" href="/assets/touch-icon.png"><link rel="stylesheet" href="//code.cdn.mozilla.net/fonts/fira.css"><link rel="stylesheet" href="/assets/core.css"><link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet"><link href="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.5.0/styles/github.min.css" rel="stylesheet"><link rel="canonical" href="/posts/wordpress-%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0-00"><link rel="alternate" type="application/atom+xml" title="VOID001's WOWO" href="/feed.xml" /> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga( 'create', 'UA-73703130-2', 'auto' ); ga( 'send', 'pageview' ); </script></head><body><aside class="logo"> <a href="/"> <img src="/assets/avatar.jpeg" class="gravatar"> </a> <span class="logo-prompt">Back to Home</span></aside><div class="footer-flex" style="margin-bottom: 4px"> Thinking, Coding, Improving</div><div class="footer-flex" style="color: #333333"> <a href="http://github.com/VOID001"><i class="fa-brands fa-lg fa-github"></i></a> <span style="margin: 4px"></span> <a href="https://t.me/s/void001_fav"><i class="fa-brands fa-lg fa-telegram"></i></a> <span style="margin: 4px"></span> <a href="/feed"><i class="fa-solid fa-lg fa-rss"></i></a></div><script src="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.1.1/js/fontawesome.min.js"></script><main> <noscript><style> article .footnotes { display: block; }</style></noscript><article><div class="center"><h1>WordPress 源码学习</h1><time>August 29, 2014</time> <span>[ ]</span></div><div class="divider"></div><p>The content is recoverd from Wordpress Blog, for more details please check <a href="recover-my-blog">HERE</a></p><h5 id="august-29-2014"><a href="https://web.archive.org/web/20201204194958/https://void-shana.moe/webdev/wordpress-%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0-00.html" title="2:57 pm">August 29, 2014</a></h5><p><a href="https://web.archive.org/web/20201204194958/https://void-shana.moe/author/void001" title="View all posts by VOID001">VOID001</a> Comments <a href="https://web.archive.org/web/20201204194958/https://void-shana.moe/webdev/wordpress-%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0-00.html#respond">0 Comment</a></p><p>开始学习研究开源代码 ，不过自己的PHP技术还很差 ，但是只要是有强大的搜索能力～ 以及一定的理解力 就可以呢{*≧∀≦}参考一下<a href="https://web.archive.org/web/20201204194958/http://blog.csdn.net/liujiyong7/article/details/8037843">这个文章</a></p><p><a href="https://web.archive.org/web/20201204194958/https://php.net/manual/zh/">PHP函数库在这里</a></p><p>那就从根目录的index.php开始解析代码～～</p><p>index.php</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php
/**
 * Front to the WordPress application. This file doesn't do anything, but loads
 * wp-blog-header.php which does and tells WordPress to load the theme.
 *
 * @package WordPress
 */

/**
 * Tells WordPress to load the WordPress theme and output it.
 *
 * @var bool
 */
define('WP\_USE\_THEMES', true);

/** Loads the WordPress Environment and Template */
require('./wp-blog-header.php');
</code></pre></div></div><p>只有两句代码： 我们分别来看一下~~</p><p>define是PHP的定义常量的语法</p><p>define函数的用法 : define(<em>NAME</em>,<em>VAL,CASE_SENSITIVE);  没有什么需要过多说明的地方 ，define函数就是定义一个常量  然后参数列表也很明确 ，注意的是 <strong>常量不需要加美元符号 ($)</strong></em></p><p>require函数 : <strong>require(‘FILENAME’)</strong> 语句包含并运行指定文件。   如果文件不存在 ，报Fatal Error  也就是说 ，如果文件不存在 这个函数的报错会导致这个网页无法加载 ，这个特性在很多时候还会用到  与它功能差不多的还有一个 include函数 不同的是如果文件不存在，只会报一个WARNING。这两个看情况使用</p><p>当一个文件被包含时，其中所包含的代码继承了 include 所在行的<a href="https://web.archive.org/web/20201204194958/https://php.net/manual/zh/language.variables.scope.php">变量范围</a>。从该处开始，调用文件在该行处可用的任何变量在被调用的文件中也都可用。不过所有在包含文件中定义的函数和类都具有全局作用域。</p><p>上面的代码既然调用了wp-blog-header.php那么我们下来就看这个代码～</p><p>wp-blog-header.php</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php
/**
 * Loads the WordPress environment and template.
 *
 * @package WordPress
 */

if ( !isset($wp\_did\_header) ) {

    $wp\_did\_header = true;

    require\_once( dirname(\_\_FILE\_\_) . '/wp-load.php' );

    wp();

    require\_once( ABSPATH . WPINC . '/template-loader.php' );

}
</code></pre></div></div><p>这个代码也不是很难理解  一行一行一个函数一个函数分析～</p><p>isset函数 isset函数可以检测这个变量是否被定义了  用法 isset(var1,var2,var3…);其中第一个必须填</p><p>require_once函数       require_once(‘FILENAME’);</p><p><em>require_once</em> 语句和 require 语句完全相同，唯一区别是 PHP 会检查该文件是否已经被包含过，如果是则不会再次包含。</p><p>dirname()函数  函数用法   dirname(string $path)给出一个文件的路径 ，返回这个文件所在的目录的绝对路径   而__FILE__这个常量 ，是 预定义常量 也叫 魔术常量 详细介绍在<a href="https://web.archive.org/web/20201204194958/https://php.net/manual/zh/language.constants.predefined.php">这里</a>  这里就理解为wp-blog-header这个文件的绝对路径就好～</p><p>dirname(__FILE__) 取到的是当前文件的绝对路径，也就是说，比起相对路径，查找速度是最快的。</p><p> </p><p>上面的代码通过require_once函数把wp-load.php的代码包含进来了～ 我们一会儿再去看那个代码 下面先继续看 :</p><p>下一个部分是wp()函数 ，这是自定义的函数，而且这个函数多的定义不存在与当前的这个文件里(wp-blog-header.php),是定义在其它文件里的 ，下次继续～这次先到这里</p><hr /><p><a href="https://web.archive.org/web/20201204194958/https://void-shana.moe/category/webdev/php">PHP</a>, <a href="https://web.archive.org/web/20201204194958/https://void-shana.moe/category/webdev">Web Develop</a> <a href="https://web.archive.org/web/20201204194958/https://void-shana.moe/tag/c-linux">C. Linux</a>, <a href="https://web.archive.org/web/20201204194958/https://void-shana.moe/tag/kernel">kernel</a>, <a href="https://web.archive.org/web/20201204194958/https://void-shana.moe/tag/laravel">Laravel</a>, <a href="https://web.archive.org/web/20201204194958/https://void-shana.moe/tag/php">PHP</a>, <a href="https://web.archive.org/web/20201204194958/https://void-shana.moe/tag/python">Python</a>, <a href="https://web.archive.org/web/20201204194958/https://void-shana.moe/tag/shell">Shell</a>, <a href="https://web.archive.org/web/20201204194958/https://void-shana.moe/tag/web">Web</a>, <a href="https://web.archive.org/web/20201204194958/https://void-shana.moe/tag/wine">wine</a></p><hr /><h2 id="historical-comments">Historical Comments</h2><p>Post navigation ————— <a href="https://web.archive.org/web/20201204194958/https://void-shana.moe/webdev/wordpress-%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0-01.html">NEXT<br /> WordPress 源码学习 #01</a> <a href="https://web.archive.org/web/20201204194958/https://void-shana.moe/acmalgo/dp%e9%a2%98%e7%9b%ae%e5%88%97%e8%a1%a8.html">PREVIOUS DP题目列表</a></p><script src="https://giscus.app/client.js" data-repo="VOID001/VOID001.github.io" data-repo-id="MDEwOlJlcG9zaXRvcnkzMzI0MDI4NQ==" data-category="Announcements" data-category-id="DIC_kwDOAfs03c4COSSU" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="1" data-input-position="top" data-theme="light" data-lang="en" data-loading="lazy" crossorigin="anonymous" async> </script></article><div class="back"> <a href="/">Back</a></div><script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.5.0/highlight.min.js"></script> <script>hljs.highlightAll();</script></main></body></html>